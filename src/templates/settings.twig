{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * @author    Fork Unstable Media GmbH
 * @copyright Copyright (c) 2018 Fork Unstable Media GmbH
 * @link      https://www.fork.de/
 * @package   Embeds
 * @since     1.0.1
 */
#}

{% import "_includes/forms" as forms %}

{#
{{ forms.textField({
    label: 'Test',
    instructions: 'Test',
    id: 'fieldToImageTransformMapping',
    name: 'fieldToImageTransformMapping',
    value: settings['fieldToImageTransformMapping']})
}}
#}

{% for handle, field in settings %}
    {{ forms.hidden({
        id: ['fieldToImageTransformMapping', 'fieldId', field.fieldId]|join('_'),
        name: 'fieldToImageTransformMapping' ~ '[' ~ loop.index ~ ']' ~ '[fieldId]',
        value: field.fieldId
    }) }}

    {#{{ forms.checkboxGroupField({#}
        {#label: field.name,#}
        {#instructions: 'Select the image transforms to use for this field',#}
        {#id: field.handle,#}
        {#name: 'fieldToImageTransformMapping' ~ '[' ~ loop.index ~ ']' ~ '[transforms]',#}
        {#options: field.transforms#}
    {#}) }}#}

    {{ forms.editableTableField({
        label: field.name,
        instructions: "Configure the image transforms to use for this field",
        id: field.handle,
        name: 'fieldToImageTransformMapping' ~ '[' ~ loop.index ~ ']' ~ '[transforms]',
        cols: {
            "srcset": {
                heading: "Srcset",
                info: "Enter any handle here to group the transforms into multiple subgroups.",
                type: "singleline",
            },
            "transformId": {
                heading: "Transform",
                info: "Select the transform you want to include for this field.",
                type: "select",
                options: transforms
            },
            "suffix": {
                heading: "Suffix",
                info: "Enter any valid suffix.",
                type: "singleline"
            },
        },
        rows: field.rows
    }) }}
{% endfor %}
